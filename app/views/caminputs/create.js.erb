$('#feedback').text('<%= @caminput.angry + ' '+@caminput.disgust+' '+@caminput.fear+' '+@caminput.happy+' '+@caminput.neutral+
	' '+@caminput.sad+' '+@caminput.surprise%> ')

var scr=[0.0,0.0,0.0,0.0,0.0,0.0,0.0];
scr[0]=parseFloat('<%= @caminput.angry%>');
scr[1]=parseFloat('<%= @caminput.disgust%>');
scr[2]=parseFloat('<%= @caminput.fear%>');
scr[3]=parseFloat('<%= @caminput.happy%>');
scr[4]=parseFloat('<%= @caminput.neutral%>');
scr[5]=parseFloat('<%= @caminput.sad%>');
scr[6]=parseFloat('<%= @caminput.surprise%>');
scdemo=0;
maxind=0;
for (var i = 0; i < scr.length; i++)
{
	if (scr[i]>scdemo)
	{
		maxind=i;
		scdemo=scr[i];
	}
}
if (scr[0]==0&scr[3]==0&&scr[4]==0)
{$('#emoid').text('8')}
else
{$('#emoid').text(maxind.toString())}
//draw rectangles
if (scr[0]>0 && scr[3]>0)
{
	var res=$('#result').get()[0];
	ctxres=res.getContext('2d');
	var resim=$('#baseimg').get()[0]
	ctxres.drawImage(resim,0,0,320,240);



	for (var i = 0; i < scr.length; i++) {
		s=scr[i];
		ctxres.beginPath();
		ctxres.fillStyle='blue'
		x=40*(i+1)-25;
		ctxres.rect(x,201-Math.round(200*s),25,Math.round(200*s));
		ctxres.fill()

	};
}